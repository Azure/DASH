# Table of content

1. [Objectives](#objectives)
2. [Requirements](#requirements)
3. [Automation](#automation)
4. [Test Suites](#test-suites)
    - [Outbound Metering](#outbound-metering)
    - [Inbound Metering](#inbound-metering)
    - [Inbound/Outbound Metering](#inboundoutbound-metering)
    - [Scaling & Performance](#scaling--performance)

---

# Objectives

The VNET-to-VNET scenario is the starting point to design, implement and test Metering  DASH mechanisms in VM to VM communication in VNET, using an Appliance for rules and routing offload.

The following to be tested:
- Metering bucket fields: eni_id, meter_class, outbound_bytes_counter, inbound_bytes_counter
- Metering policy field: ip_addr_family
- Metering rule fields: meter_policy_id, dip, dip_mask, priority, meter_class
- Inbound and Outbound Metering
- IPv4/IPv6 overlay Metering

## Requirements

Tests are developed with a reference to the following resources:
- [DASH HLD Metering requirements](https://github.com/sonic-net/DASH/blob/main/documentation/general/dash-sonic-hld.md#15-metering-requirements).
- [DASH HLD Metering](https://github.com/sonic-net/DASH/blob/main/documentation/general/dash-sonic-hld.md#24-metering).
- [VNET to VNET scenario](https://github.com/sonic-net/DASH/blob/main/documentation/vnet2vnet-service/vnet-to-vnet-service.md).


# Automation

Test cases are automated using SAI PTF test framework, except scale and performance tests.
Scale and performance tests automation approach - to be defined.


# Test suites

### **Outbound Metering**
|  #  | Test case purpose | Test Class.Method                                                                                                                                                                                                                                                                                                                        | Test description |
|:---:|:---|:-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|:---|
|  1-2  | Verify IPv4 Metering rule priority | `Vnet2VnetIPv4OutboundMeteringOnePortTest.`<br>`vnet2VnetOutboundMeteringRulePriorityTest`<br><br>`Vnet2VnetIPv4OutboundMeteringVnetTwoPortsTest.`<br>`vnet2VnetOutboundMeteringRulePriorityTest`                                                                                                                                                                      | Creates two ENIs with outbound overlay configuration. <br/> Creates two metering buckets, IPv4 family policies and rules with different priority <br/> Verifies configuration with bidirectional VXLAN TCP and UDP traffic and different IPv4 netmask. Verify Metering rules priority.<br/>1. With underlay route<br/>2. Without underlay route  | 
|  3-4  | Verify IPv6 Metering rule priority | `Vnet2VnetIPv6OutboundMeteringOnePortTest.`<br>`vnet2VnetOutboundMeteringRulePriorityTest`<br><br>`Vnet2VnetIPv6OutboundMeteringVnetTwoPortsTest.`<br>`vnet2VnetOutboundMeteringRulePriorityTest`                                                                                                                                                                      | Creates two ENIs with outbound overlay configuration. <br/> Creates metering bucket, IPv6 family policies and rules with different priority<br/> Verifies configuration with bidirectional VXLAN TCP and UDP traffic and different IPv6 netmask. Verify Metering rules priority<br/>1. With underlay route<br/>2. Without underlay route  |  
|  5-6  | Verify IPv4 Metering rule destination ip mask | `Vnet2VnetIPv4OutboundMeteringOnePortTest.`<br>`vnet2VnetOutboundMeteringRuleDipMaskTest`<br><br>`Vnet2VnetIPv4OutboundMeteringVnetTwoPortsTest.`<br>`vnet2VnetOutboundMeteringRuleDipMaskTest`                                                                                                                                                                      | Creates two ENIs with outbound overlay configuration. <br/> Creates two metering buckets, IPv4 family policies and rules with different destination ip mask <br/> Verifies configuration with bidirectional VXLAN TCP and UDP traffic and different IPv4 netmask. Verify Metering rules destination ip mask.<br/>1. With underlay route<br/>2. Without underlay route  | 
|  7-8  | Verify IPv6 Metering rule destination ip mask | `Vnet2VnetIPv6OutboundMeteringOnePortTest.`<br>`vnet2VnetOutboundMeteringRuleDipMaskTest`<br><br>`Vnet2VnetIPv6OutboundMeteringVnetTwoPortsTest.`<br>`vnet2VnetOutboundMeteringRuleDipMaskTest`                                                                                                                                                                      | Creates two ENIs with outbound overlay configuration. <br/> Creates metering bucket, IPv6 family policies and rules with different destination ip mask<br/> Verifies configuration with bidirectional VXLAN TCP and UDP traffic and different IPv6 netmask. Verify Metering rules destination ip mask<br/>1. With underlay route<br/>2. Without underlay route  |  
|  9-16  | Verify IPv4 Meter mapping with Routing type VNET and map-meter-over meter-policy-en params  | `Vnet2VnetIPv4OutboundMeteringOnePortTest.`<br>`vnet2VnetOutboundMeteringMapVnetOverridePolicyEnabledTest`<br> <br>`Vnet2VnetIPv4OutboundMeteringTwoPortsTest`<br>`vnet2VnetOutboundMeteringMapVnetOverridePolicyEnabledTest`<br> <br>`Vnet2VnetIPv4OutboundMeteringOnePortTest.`<br>`vnet2VnetOutboundMeteringMapVnetOverridePolicyDisabledTest`<br> <br>`Vnet2VnetIPv4OutboundMeteringTwoPortsTest`<br>`vnet2VnetOutboundMeteringMapVnetOverridePolicyDisabledTest`<br> <br>`Vnet2VnetIPv4OutboundMeteringOnePortTest.`<br>`vnet2VnetOutboundMeteringMapVnetPolicyEnabledTest`<br> <br>`Vnet2VnetIPv4OutboundMeteringTwoPortsTest`<br>`vnet2VnetOutboundMeteringMapVnetPolicyEnabledTest`<br> <br>`Vnet2VnetIPv4OutboundMeteringOnePortTest.`<br>`vnet2VnetOutboundMeteringMapVnetPolicyDisabledTest`<br> <br>`Vnet2VnetIPv4OutboundMeteringTwoPortsTest`<br>`vnet2VnetOutboundMeteringMapVnetPolicyDisabledTest`                                                                                                                                                   | Creates one ENI outbound overlay configuration. <br/> Creates metering bucket, outbound routing entry with VNET action meter_policy_en = True/False and map-meter-over True/False <br/> Verifies configuration with bidirectional VXLAN TCP and UDP traffic and different IPv4 netmask. Verify Metering bucket inbound and outbound bytes counter.<br/>1. With underlay route<br/>2. Without underlay route  | 
|  17-24  | Verify IPv6 Meter mapping with Routing type VNET and map-meter-over meter-policy-en params | `Vnet2VnetIPv6OutboundMeteringOnePortTest.`<br>`vnet2VnetOutboundMeteringMapVnetOverridePolicyEnabledTest`<br> <br>`Vnet2VnetIPv6OutboundMeteringTwoPortsTest`<br>`vnet2VnetOutboundMeteringMapVnetOverridePolicyEnabledTest`<br> <br>`Vnet2VnetIPv6OutboundMeteringOnePortTest.`<br>`vnet2VnetOutboundMeteringMapVnetOverridePolicyDisabledTest`<br> <br>`Vnet2VnetIPv6OutboundMeteringTwoPortsTest`<br>`vnet2VnetOutboundMeteringMapVnetOverridePolicyDisabledTest`<br> <br>`Vnet2VnetIPv6OutboundMeteringOnePortTest.`<br>`vnet2VnetOutboundMeteringMapVnetPolicyEnabledTest`<br> <br>`Vnet2VnetIPv6OutboundMeteringTwoPortsTest`<br>`vnet2VnetOutboundMeteringMapVnetPolicyEnabledTest`<br> <br>`Vnet2VnetIPv6OutboundMeteringOnePortTest.`<br>`vnet2VnetOutboundMeteringMapVnetPolicyDisabledTest`<br> <br>`Vnet2VnetIPv6OutboundMeteringTwoPortsTest`<br>`vnet2VnetOutboundMeteringMapVnetPolicyDisabledTest`                                                                                                                                                   | Creates one ENI outbound overlay configuration. <br/> Creates metering bucket, outbound routing entry with VNET action meter_policy_en = True/False and map-meter-over True/False <br/> Verifies configuration with bidirectional VXLAN TCP and UDP traffic and different IPv6 netmask. Verify Metering bucket inbound and outbound bytes counter.<br/>1. With underlay route<br/>2. Without underlay route  | 
|  25-32  | Verify IPv4 Meter mapping with Routing type VNET DIRECT and map-meter-over meter-policy-en params | `Vnet2VnetIPv4OutboundMeteringOnePortTest.`<br>`vnet2VnetOutboundMeteringMapVnetOverridePolicyEnabledTest`<br> <br>`Vnet2VnetIPv4OutboundMeteringTwoPortsTest`<br>`vnet2VnetOutboundMeteringMapVnetDirectOverridePolicyEnabledTest`<br> <br>`Vnet2VnetIPv4OutboundMeteringOnePortTest.`<br>`vnet2VnetOutboundMeteringMapVnetDirectOverridePolicyDisabledTest`<br> <br>`Vnet2VnetIPv4OutboundMeteringTwoPortsTest`<br>`vnet2VnetOutboundMeteringMapVnetDirectOverridePolicyDisabledTest`<br> <br>`Vnet2VnetIPv4OutboundMeteringOnePortTest.`<br>`vnet2VnetOutboundMeteringMapVnetDirectPolicyEnabledTest`<br> <br>`Vnet2VnetIPv4OutboundMeteringTwoPortsTest`<br>`vnet2VnetOutboundMeteringMapVnetDirectPolicyEnabledTest`<br> <br>`Vnet2VnetIPv4OutboundMeteringOnePortTest.`<br>`vnet2VnetOutboundMeteringMapVnetDirectPolicyDisabledTest`<br> <br>`Vnet2VnetIPv4OutboundMeteringTwoPortsTest`<br>`vnet2VnetOutboundMeteringMapVnetDirectPolicyDisabledTest`                                                                                                                                             | Creates one ENI outbound overlay configuration. <br/> Creates metering bucket, outbound routing entry with VNET DIRECT action meter_policy_en = True/False and map-meter-over True/False <br/> Verifies configuration with bidirectional VXLAN TCP and UDP traffic and different IPv4 netmask. Verify Metering bucket inbound and outbound bytes counter.<br/>1. With underlay route<br/>2. Without underlay route  | 
|  33-40  | Verify IPv6 Meter mapping with Routing type VNET DIRECT and map-meter-over meter-policy-en params | `Vnet2VnetIPv6OutboundMeteringOnePortTest.`<br>`vnet2VnetOutboundMeteringMapVnetDirectOverridePolicyEnabledTest`<br> <br>`Vnet2VnetIPv6OutboundMeteringTwoPortsTest`<br>`vnet2VnetOutboundMeteringMapVnetDirectOverridePolicyEnabledTest`<br> <br>`Vnet2VnetIPv6OutboundMeteringOnePortTest.`<br>`vnet2VnetOutboundMeteringMapVnetDirectOverridePolicyDisabledTest`<br> <br>`Vnet2VnetIPv6OutboundMeteringTwoPortsTest`<br>`vnet2VnetOutboundMeteringMapVnetDirectOverridePolicyDisabledTest`<br> <br>`Vnet2VnetIPv6OutboundMeteringOnePortTest.`<br>`vnet2VnetOutboundMeteringMapVnetDirectPolicyEnabledTest`<br> <br>`Vnet2VnetIPv6OutboundMeteringTwoPortsTest`<br>`vnet2VnetOutboundMeteringMapVnetDirectPolicyEnabledTest`<br> <br>`Vnet2VnetIPv6OutboundMeteringOnePortTest.`<br>`vnet2VnetOutboundMeteringMapVnetDirectPolicyDisabledTest`<br> <br>`Vnet2VnetIPv6OutboundMeteringTwoPortsTest`<br>`vnet2VnetOutboundMeteringMapVnetDirectPolicyDisabledTest`                                                                                                                                             | Creates one ENI outbound overlay configuration. <br/> Creates metering bucket, outbound routing entry with VNET DIRECT action meter_policy_en = True/False and map-meter-over True/False <br/> Verifies configuration with bidirectional VXLAN TCP and UDP traffic and different IPv6 netmask. Verify Metering bucket inbound and outbound bytes counter.<br/>1. With underlay route<br/>2. Without underlay route  |   
|  41-42  | Verify IPv4 2 ENIs with same Metering policy | `Vnet2VnetIPv4OutboundMeteringOnePortTest.`<br>`vnet2VnetOutboundSameMeteringPolicyTest`<br><br>`Vnet2VnetIPv4OutboundMeteringVnetTwoPortsTest.`<br>`vnet2VnetOutboundSameMeteringPolicyTest`                                                                                                                                                                      | Creates IPv4 family policy and two ENIs with outbound overlay configuration and same policy. <br/> Creates two metering buckets<br/> Verifies configuration with bidirectional VXLAN TCP and UDP traffic and different IPv4 netmask. Verify Metering counter for 2 ENIs.<br/>1. With underlay route<br/>2. Without underlay route  | 
|  43-44  | Verify IPv6 ENIs with same Metering policy | `Vnet2VnetIPv6OutboundMeteringOnePortTest.`<br>`vnet2VnetOutboundSameMeteringPolicyTest`<br><br>`Vnet2VnetIPv6OutboundMeteringVnetTwoPortsTest.`<br>`vnet2VnetOutboundSameMeteringPolicyTest`                                                                                                                                                                      | Creates IPv4 family policy and two ENIs with outbound overlay configuration and same policy. <br/> Creates two metering buckets<br/> Verifies configuration with bidirectional VXLAN TCP and UDP traffic and different IPv6 netmask. Verify Metering counter for 2 ENIs<br/>1. With underlay route<br/>2. Without underlay route  |  


### **Inbound Metering**
|  #  | Test case purpose | Test Class.Method                                                                                                                                                                                                                                                                                                                        | Test description |
|:---:|:---|:-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|:---|
|  1-2  | Verify IPv4 Metering bucket inbound bytes counter | `Vnet2VnetIPv4InboundMeteringOnePortTest.`<br>`vnet2VnetInboundMeteringBucketCounterTest`<br><br>                                                                          `Vnet2VnetIPv4InboundMeteringTwoPortsTest.`<br>`vnet2VnetInboundMeteringBucketCounterTest`                                                                                            | Creates one ENI inbound overlay configuration.<br/> Creates metering bucket, IPv4 family policy and rule<br/> Verifies configuration with bidirectional VXLAN TCP and UDP traffic and different IPv4 netmask. Verify Metering bucket inbound and outbound bytes counter.<br/>1. With underlay route<br/>2. Without underlay route  |
|  3-4  | Verify IPv6 Metering bucket inbound bytes counter | `Vnet2VnetIPv6InboundMeteringOnePortTest.`<br>`vnet2VnetInboundMeteringBucketCounterTest`<br><br>                                                                          `Vnet2VnetIPv6InboundMeteringTwoPortsTest.`<br>`vnet2VnetInboundMeteringBucketCounterTest`                                                                                            | Creates one ENI inbound overlay configuration.<br/> Creates metering bucket, IPv6 family policy and rule<br/> Verifies configuration with bidirectional VXLAN TCP and UDP traffic and different IPv6 netmask. Verify Metering bucket inbound and outbound bytes counter.<br/>1. With underlay route<br/>2. Without underlay route  |
|  5-6  | Verify IPv4 Metering rule priority | `Vnet2VnetIPv4InboundMeteringOnePortTest.`<br>`vnet2VnetInboundMeteringRulePriorityTest`<br><br>                                                                          `Vnet2VnetIPv4InboundMeteringTwoPortsTest.`<br>`vnet2VnetInboundMeteringRulePriorityTest`                                                                                            | Creates two ENIs with inbound overlay configuration.<br/> Creates two metering buckets, IPv4 family policies and rules with different priority<br/> Verifies configuration with bidirectional VXLAN TCP and UDP traffic and different IPv4 netmask. Verify Metering rules priority.<br/>1. With underlay route<br/>2. Without underlay route  |
|  7-8  | Verify IPv6 Metering rule priority | `Vnet2VnetIPv6InboundMeteringOnePortTest.`<br>`vnet2VnetInboundMeteringRulePriorityTest`<br><br>                                                                          `Vnet2VnetIPv6InboundMeteringTwoPortsTest.`<br>`vnet2VnetInboundMeteringRulePriorityTest`                                                                                            | Creates two ENIs with inbound overlay configuration.<br/> Creates two metering buckets, IPv6 family policies and rules with different priority<br/> Verifies configuration with bidirectional VXLAN TCP and UDP traffic and different IPv6 netmask. Verify Metering rules priority.<br/>1. With underlay route<br/>2. Without underlay route  |
|  9-10  | Verify IPv4 Metering rule destination ip mask | `Vnet2VnetIPv4InboundMeteringOnePortTest.`<br>`vnet2VnetInboundMeteringRuleDipMaskTest`<br><br>                                                                          `Vnet2VnetIPv4InboundMeteringTwoPortsTest.`<br>`vnet2VnetInboundMeteringRuleDipMaskTest`                                                                                            | Creates two ENIs with inbound overlay configuration.<br/> Creates two metering buckets, IPv4 family policies and rules with different destination ip mask<br/> Verifies configuration with bidirectional VXLAN TCP and UDP traffic and different IPv4 netmask. Verify Metering rules destination ip mask.<br/>1. With underlay route<br/>2. Without underlay route  |
|  11-12  | Verify IPv6 Metering rule destination ip mask | `Vnet2VnetIPv6InboundMeteringOnePortTest.`<br>`vnet2VnetInboundMeteringRuleDipMaskTest`<br><br>                                                                          `Vnet2VnetIPv6InboundMeteringTwoPortsTest.`<br>`vnet2VnetInboundMeteringRuleDipMaskTest`                                                                                            | Creates two ENIs with inbound overlay configuration.<br/> Creates two metering buckets, IPv6 family policies and rules with different destination ip mask<br/> Verifies configuration with bidirectional VXLAN TCP and UDP traffic and different IPv6 netmask. Verify Metering rules destination ip mask.<br/>1. With underlay route<br/>2. Without underlay route  |
|  13-14  | Verify IPv4 Inbound routing entry with inbound_routing_decap_create | `Vnet2VnetIPv4InboundMeteringOnePortTest.`<br>`vnet2VnetInboundMeteringRoutingDecapTest`<br><br>                                                                          `Vnet2VnetIPv4InboundMeteringTwoPortsTest.`<br>`vnet2VnetInboundMeteringRoutingDecapTest`                                                                               | Creates one ENI inbound overlay configuration. <br/> Creates metering bucket, inbound decap routing entry <br/> Verifies configuration with bidirectional VXLAN TCP and UDP traffic and different IPv4 netmask. Verify Metering bucket inbound and outbound bytes counter.<br/>1. With underlay route<br/>2. Without underlay route  | 
|  15-16  | Verify IPv6 Inbound routing entry with inbound_routing_decap_create | `Vnet2VnetIPv6InboundMeteringOnePortTest.`<br>`vnet2VnetInboundMeteringRoutingDecapTest`<br><br>                                                                          `Vnet2VnetIPv6InboundMeteringTwoPortsTest.`<br>`vnet2VnetInboundMeteringRoutingDecapTest`                                                                               | Creates one ENI inbound overlay configuration. <br/> Creates metering bucket, inbound decap routing entry <br/> Verifies configuration with bidirectional VXLAN TCP and UDP traffic and different IPv6 netmask. Verify Metering bucket inbound and outbound bytes counter.<br/>1. With underlay route<br/>2. Without underlay route  | 
|  17-18  | Verify IPv4 Inbound routing entry with inbound_routing_decap_validate_create | `Vnet2VnetIPv4InboundMeteringOnePortTest.`<br>`vnet2VnetInboundMeteringRoutingDecapValidateTest`<br><br>                                                                          `Vnet2VnetIPv4InboundMeteringTwoPortsTest.`<br>`vnet2VnetInboundMeteringRoutingDecapValidateTest`                                                                       | Creates one ENI inbound overlay configuration. <br/> Creates metering bucket, inbound decap validate routing entry <br/> Verifies configuration with bidirectional VXLAN TCP and UDP traffic and different IPv4 netmask. Verify Metering bucket inbound and outbound bytes counter.<br/>1. With underlay route<br/>2. Without underlay route  | 
|  19-20  | Verify IPv6 Inbound routing entry with inbound_routing_decap_validate_create | `Vnet2VnetIPv6InboundMeteringOnePortTest.`<br>`vnet2VnetInboundMeteringRoutingDecapValidateTest`<br><br>                                                                          `Vnet2VnetIPv6InboundMeteringTwoPortsTest.`<br>`vnet2VnetInboundMeteringRoutingDecapValidateTest`                                                                       | Creates one ENI inbound overlay configuration. <br/> Creates metering bucket, inbound decap validate routing entry <br/> Verifies configuration with bidirectional VXLAN TCP and UDP traffic and different IPv6 netmask. Verify Metering bucket inbound and outbound bytes counter.<br/>1. With underlay route<br/>2. Without underlay route  | 


### **Inbound/Outbound Metering**
|  #  | Test case purpose | Test Class.Method                                                                                                                                                                                                                                                                                                                        | Test description |
|:---:|:---|:-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|:---|
|  1-2  | Verify IPv4 Metering bucket inbound and outbound bytes counter. | `Vnet2VnetIPv4InboundOutboundMeteringVnetOnePortTest.`<br/> `vnet2VnetInboundOutboundMeteringBucketCounterTest`<br><br>`Vnet2VnetIPv4InboundOutboundMeteringTwoPortsTest.`<br>`vnet2VnetInboundOutboundMeteringBucketCounterTest` | Creates two ENIs, each with Inbound and Outbound configuration.<br/> Creates two metering buckets, IPv4 family policies and rules <br/> Verifies configurations with bidirectional VXLAN TCP and UDP traffic. Verify Metering bucket inbound and outbound bytes counter.<br/>1. With underlay route<br/>2. Without underlay route |
|  3-4  | Verify IPv6 Metering bucket inbound and outbound bytes counter. | `Vnet2VnetIPv6InboundOutboundMeteringVnetOnePortTest.`<br/> `vnet2VnetInboundOutboundMeteringBucketCounterTest`<br><br>`Vnet2VnetIPv6InboundOutboundMeteringTwoPortsTest.`<br>`vnet2VnetInboundOutboundMeteringBucketCounterTest` | Creates two ENIs, each with Inbound and Outbound configuration.<br/> Creates two metering buckets, IPv6 family policies and rules <br/> Verifies configurations with bidirectional VXLAN TCP and UDP traffic. Verify Metering bucket inbound and outbound bytes counter.<br/>1. With underlay route<br/>2. Without underlay route |
|  5-6  | Verify IPv4 Metering rule priority. | `Vnet2VnetIPv4InboundOutboundMeteringVnetOnePortTest.`<br/> `vnet2VnetInboundOutboundMeteringRulePriorityTest`<br><br>`Vnet2VnetIPv4InboundOutboundMeteringTwoPortsTest.`<br>`vnet2VnetInboundOutboundMeteringRulePriorityTest` | Creates two ENIs, each with Inbound and Outbound configuration.<br/> Creates two metering buckets, IPv4 family policies and rules with different priority <br/> Verifies configurations with bidirectional VXLAN TCP and UDP traffic. Verify Metering rules priority.<br/>1. With underlay route<br/>2. Without underlay route |
|  7-8  | Verify IPv6 Metering rule priority. | `Vnet2VnetIPv6InboundOutboundMeteringVnetOnePortTest.`<br/> `vnet2VnetInboundOutboundMeteringRulePriorityTest`<br><br>`Vnet2VnetIPv6InboundOutboundMeteringTwoPortsTest.`<br>`vnet2VnetInboundOutboundMeteringRulePriorityTest` | Creates two ENIs, each with Inbound and Outbound configuration.<br/> Creates two metering buckets, IPv6 family policies and rules with different priority <br/> Verifies configurations with bidirectional VXLAN TCP and UDP traffic. Verify Metering rules priority.<br/>1. With underlay route<br/>2. Without underlay route |
|  9-10  | Verify IPv4 Metering rule destination ip mask. | `Vnet2VnetIPv4InboundOutboundMeteringVnetOnePortTest.`<br/> `vnet2VnetInboundOutboundMeteringBucketCounterTest`<br><br>`Vnet2VnetIPv4InboundOutboundMeteringTwoPortsTest.`<br>`vnet2VnetInboundOutboundMeteringBucketCounterTest` | Creates two ENIs, each with Inbound and Outbound configuration.<br/> Creates two metering buckets, IPv4 family policies and rules with different destination ip mask <br/> Verifies configurations with bidirectional VXLAN TCP and UDP traffic. Verify Metering rules destination ip mask.<br/>1. With underlay route<br/>2. Without underlay route |
|  11-12  | Verify IPv6 Metering rule destination ip mask. | `Vnet2VnetIPv6InboundOutboundMeteringVnetOnePortTest.`<br/> `vnet2VnetInboundOutboundMeteringBucketCounterTest`<br><br>`Vnet2VnetIPv6InboundOutboundMeteringTwoPortsTest.`<br>`vnet2VnetInboundOutboundMeteringBucketCounterTest` | Creates two ENIs, each with Inbound and Outbound configuration.<br/> Creates two metering buckets, IPv6 family policies and rules with different destination ip mask <br/> Verifies configurations with bidirectional VXLAN TCP and UDP traffic. Verify Metering rules destination ip mask.<br/>1. With underlay route<br/>2. Without underlay route |


### **Scaling & Performance**

To be defined.